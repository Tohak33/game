print ("Добро пожаловать в игру Побег из лабиринта!")
print ("Ваша цель - пройти все трудности выбраться из лабиринта")
print ("Находи полезные предметы, решай загадки и найди выход!")
print('=' *50)
имя=input("Как тебя зовут?")
print(f"Привет {имя}, твое начальное здоровье 100. Рекомендую не терять его! ")
здоровье = 100
инвентарь = []
посещенные_комнаты = set()
print("Уровень 1!")
print("Ты в центре лабиринта. Вокруг тебя четыре комнаты")
print("Найди 3 части карты, чтобы найти выход!")
комнаты = {
    "один": ["часть карты", "фонарик", "яблоко"],
    "два": ["часть карты", "ключ", "зелье здоровья"],
    "три": ["часть карты", "меч", "щит"],
    "четыре": ["знание о загадочной двери", "сундук","записка"]
}  
ловушки = {
    "один": ["скользкий пол"],
    "два": ["ядовитые шипы"],
    "три": ["падающие камни"],
    "четыре": ["огненная ловушка"]
}
части_карты=0
комнаты_посещены=0
while части_карты <3:
    print('=' *50)
    print(f"Найдено частей карты {части_карты}/3")
    print('=' *50)
    print("Доступные команды идти [номер комнаты], осмотреться, инвентарь, здоровье")
    команда = input("Твой выбор?")
    if команда.startswith("идти "):
        направление = команда[5:]
        if направление not in комнаты:
            print("Такой комнаты нет")
            continue
        посещенные_комнаты.add (направление)
        комнаты_посещены += 1
        print(f"Ты вошел в  комнату номер {направление}")
        if направление in ловушки:
            print("О нет! Ты попал в ловушку")
            здоровье-=15
            print(f"здоровье: {здоровье}")
            if здоровье <=0:
                print("Ты проиграл! ")
                exit()
            предметы=комнаты[направление]
        print("В комнате ты увидел:")
        for предмет in предметы:
            print(f"{предмет}")
        for предмет in предметы[:]:
            инвентарь.append(предмет)
            предметы.remove(предмет)
            if "часть карты" in предмет:
                части_карты+=1
                print("Отлично! ты нашел часть карты!")
            elif "зелье здоровья" in предмет:
                print("Отлично! ты нашел зелье здоровья!")
            elif "щит" and "меч" in предмет:
                print("Отлично! вы нашли сильное снаряжение")
            elif "ключ" in предмет:
                print("Вы нашли странный ключ... Наверное он открывает какую-то дверь")
        if направление == "четыре" and "ключ" in инвентарь:
            print("Какая удача! у вас есть ключ от загадочной двери в этой комнате")
            print("За дверью ты увидел сундук. Ты открыл его и забрал золотые монеты")
            инвентарь.append ("золотые монеты")
            инвентарь.remove("ключ")
    elif команда == "инвентарь":
        print("Твой инвентарь:")
        print(инвентарь)
    elif команда == "здоровье":
        print(здоровье)
        if здоровье<30:
            print("Низкий уровень здоровья!")
            if "зелье здоровья" in инвентарь:
                лечение = input("Хотите использовать зелье здоровья? да/нет ")
                if лечение =="да":
                    print("Хорошо, здоровье увеличено на 30")
                    здоровье+=30
                    инвентарь.remove("зелье здоровья")
                elif лечение =="нет":
                    print("Главное, не пожалейте об этом!")
                else:
                    print("Неверный ввод")
    else:
        print("Неверный ввод")
print('=' *50)
print("Поздравляю!! Ты собрал все части карты.")
print("Ты складываешь части карты воедино и идешь к выходу.")
print("Ты у выхода, но дверь заперта волшебным замком.")
print("Нужно разгадать 3 загадки чтобы открыть ее!")

загадки = {
    "1": "Висит груша - нельзя скушать",
    "2": "Зимой и летом одним цветом", 
    "3": "Сидит дед во сто шуб одет"
}

ответы = {
    "1": "лампочка",
    "2": "ель",
    "3": "лук"
}

разгадано = set()
попытки = 3

while len(разгадано) < 3 and попытки > 0:
    print(f"\nРазгадано загадок: {len(разгадано)}/3")
    print(f"Осталось попыток: {попытки}")
    print("Команды: загадки, отгадать [номер], подсказка [номер]")
    
    команда = input("\nТвой выбор: ").lower().strip()
    
    if команда == "загадки":
        print("\nДоступные загадки:")
        for номер, загадка in загадки.items():
            if номер not in разгадано:
                print(f"{номер}. {загадка}")
            
    elif команда.startswith("отгадать "):
        номер = команда[9:]
        
        if номер in загадки and номер not in разгадано:
            ответ = input(f"Напиши ответ на загадку '{загадки[номер]}': ").lower()
            
            if ответ == ответы[номер]:
                print("Правильно! Загадка разгадана!")
                разгадано.add(номер)
            else:
                print("Неправильно! Попробуй другую загадку.")
                попытки -= 1
        else:
            print("Неверный номер загадки или загадка уже разгадана!")
            
    elif команда.startswith("подсказка "):
        номер = команда[10:]
        
        if номер in загадки and номер not in разгадано:
            print(f"\nПодсказка для загадки {номер}:")
            if номер == "1":
                print("Это висит на потолке и светит")
            elif номер == "2":
                print("Это дерево, которое всегда зеленое")
            elif номер == "3":
                print("Это овощ, который растет в земле")
            попытки -= 1
        else:
            print("Неверный номер загадки или загадка уже разгадана!")
        
    else:
        print("Не понимаю команду")
        
    if попытки <= 0:
        print("\nУ тебя кончились попытки! Ты остался в лабиринте навсегда.")
        exit()

print("Все загадки разгаданы! Дверь открывается...")
print("За дверью ты увидел каменного стража. Надеюсь ты нашел снаряжение в лабиринте...")
print("Отлично! У тебя есть смеч и щит!")
print("Ты убил каменного стража и вышел на свободу")
print("ПОЗДРАВЛЯЮ!! ТЫ ПРОШЕЛ ИГРУ!!")

